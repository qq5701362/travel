<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="jx.tour.mapper.DataViewMapper">

    <!-- select sum(tnum) value1
        ,sum(total) value2,areaname name from (select
        userorder.tnum,userorder.total,area.areaName areaname from
        userorder,specialty,area
        where specialty.id = userorder.pid and specialty.tNum = area.areaNum) a
        GROUP BY areaname; -->
        
    <select id="getOrderNumber" resultType="jx.tour.pojo.OrderNumber">
        select 
            sum(tnum) value1,sum(total) value2,a.tname name
        from (
            select
                userorder.tname,userorder.tnum,userorder.total,area.areaName areaname 
            from
                userorder,specialty,area
            where specialty.id = userorder.pid) a
        GROUP BY a.tname;
    </select>
    
    <select id="getExportTicket" resultType="jx.tour.pojo.OrderNumber">
        select 
            MONTH(time) as name, SUM(qty_item_1) as value1,SUM(total) as value2
        from 
            ticket 
        where 
            YEAR(time) = 2020 
        GROUP BY 
            MONTH(time) 
        ORDER BY time asc

    </select>
</mapper>